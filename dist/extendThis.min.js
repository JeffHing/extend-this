!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):"object"==typeof exports?exports.extendThis=r():e.extendThis=r()}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){"use strict";function n(e){return arguments.length>1&&P&&j(P,null,arguments),S.setTarget(e)}function o(e){var r,t=e.shift();m(t)?(1!==e.length&&A.illegalArgument(t,"Requires a single property value"),r={},r[t]=e.shift()):g(t)?r=t:A.illegalArgument(t,"No source object found.");for(var n={},o={},u=[];e.length;){var i=e.shift();if(m(i))N.executeSelector(r,i,null,o,n)||(o[i]=i);else if(K(i))w(o,r,i);else if(h(i))for(var c=0;c<i.length;c++)e.push(i[c]);else if(x(i))u.push(i);else if(g(i))for(var s in i){var a=i[s];N.executeSelector(r,s,a,o,n)||(o[s]=a),m(o[s])||A.illegalArgument(a,"Target property name is not a string.")}}return v(o)&&w(o,r),{source:r,filters:u,sourceKeys:o,overrideKeys:n}}function u(e,r,t,n,o){var u={target:e,source:r,sourceKey:null,targetKey:null,sourceValue:null};for(var i in t){u.sourceKey=i,u.targetKey=t[i],i in r||A.propertyNotFound(i,r),u.sourceValue=r[i];for(var c=0;c<n.length;c++)if(!n[c](u)){u.targetKey=null;break}if(null!==u.targetKey){var s=u.targetKey in e;e[u.targetKey]=u.sourceValue,s&&!o[i]&&A.propertyOverride(u.targetKey,e)}}}function i(){function e(e,r){return void 0!==r&&(n[e]=r),n[e]}function r(e){var r={};for(var o in n)r[o]=t(e,n[o]);return r}function t(e,r){return function(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=r(e,o,t);return u(e,i.source,i.sourceKeys,i.filters,i.overrideKeys),this}}var n={};return{addMethod:e,setTarget:r}}function c(e,r,t){var n=r(t);return n.filters.unshift(p(/^_/)),n.filters.push(d),n}function s(e,r,t){return r(t)}function a(e,r,t){var n=t[0],o=[],u=[];h(n)&&x(n[0])?(o=n.splice(1),n=n[0],u=t.splice(1)):x(n)?o=t.splice(1):A.illegalArgument(t,"first argument must be a function");var i=function(){};i.prototype=e;var c=new i;j(n,c,o);var s={};for(var a in c)c.hasOwnProperty(a)&&(s[a]=c[a]);return u.unshift(s),r(u)}function f(){function e(e,r){return void 0!==r&&(t[e]=r),t[e]}function r(e,r,n,o,u){for(var i in t)if(0===r.indexOf(i))return r=r.substring(i.length),t[i]({source:e,sourceKey:r,targetKey:n?n:r,sourceKeys:o,overrideKeys:u}),!0;return!1}var t={};return{addSelector:e,executeSelector:r}}function l(e){v(e.sourceKeys)&&w(e.sourceKeys,e.source),void 0!==e.sourceKeys[e.sourceKey]?delete e.sourceKeys[e.sourceKey]:A.propertyNotFound(e.sourceKey,e.source)}function y(e){e.overrideKeys[e.sourceKey]=!0,e.sourceKeys[e.sourceKey]=e.targetKey}function p(e){return function(r){return!e.test(r.sourceKey)}}function d(e){if(x(e.sourceValue)){var r=e.sourceValue,t=e.source;e.sourceValue=function(){return j(r,t,arguments)}}return!0}function g(e){return null===e?!1:"object"==typeof e}function v(e){for(var r in e)if(e.hasOwnProperty(r))return!1;return!0}function h(e){return"[object Array]"===Object.prototype.toString.call(e)}function K(e){return e instanceof RegExp}function m(e){return"string"==typeof e}function x(e){return"function"==typeof e}function w(e,r,t){for(var n in r)(!t||t.test(n))&&(e[n]=n)}function b(e){var r=[];return JSON.stringify(e,function(e,t){if(null!==t&&"object"==typeof t){if(r.indexOf(t)>=0)return void 0;r.push(t)}return t})}function O(){function e(e,r){var t=b(e)+": "+r;throw new Error(n("Illegal argument",t))}function r(e,r){if(E.throwPropertyNotFoundError){var t=e+" in "+b(r);throw new Error(n("Property not found",t))}}function t(e,r){if(E.throwOverrideError){var t=e+" in "+b(r);throw new Error(n("Property already exists",t))}}function n(e,r){return m(r)||(r=b(r)),E.filename+": "+e+": "+r}return{illegalArgument:e,propertyNotFound:r,propertyOverride:t}}var j=t(1),E={filename:"extendThis.js",throwPropertyNotFoundError:!0,throwOverrideError:!0},N=f(),S=i(),A=O(),P=null;e.exports=n,n.selector=N.addSelector,n.method=S.addMethod,n.config=E,n.wrap=function(e){P=e},n.selector("!",l),n.selector("#",y),n.method("withCall",a),n.method("withDelegate",c),n.method("with",s)},function(e,r){function t(e,r,t){switch(t?t.length:0){case 0:return r?e.call(r):e();case 1:return r?e.call(r,t[0]):e(t[0]);case 2:return r?e.call(r,t[0],t[1]):e(t[0],t[1]);case 3:return r?e.call(r,t[0],t[1],t[2]):e(t[0],t[1],t[2]);case 4:return r?e.call(r,t[0],t[1],t[2],t[3]):e(t[0],t[1],t[2],t[3]);case 5:return r?e.call(r,t[0],t[1],t[2],t[3],t[4]):e(t[0],t[1],t[2],t[3],t[4]);default:return e.apply(r,t)}}e.exports=t}])});
